import Init from './init';
/* 兼容浏览器和webworker */

var indexeddb = indexedDB || webkitIndexedDB || mozIndexedDB || msIndexedDB;
/**
 * 初始化数据库
 * @param { string } name            创建或者连接的数据库名
 * @param { number } version         数据库版本号
 * @param { Object } callbackObject  配置回调函数
 *   - success                       创建或者连接的数据库成功后的回调函数
 *   - error                         创建或者连接的数据库失败后的回调函数
 *   - upgradeneeded                 数据库版本号更新后的回调函数
 */

function IndexedDB(name, version) {
  var callbackObject = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  IndexedDB.prototype.indexeddb = indexeddb;
  return new Init(indexeddb, name, version, callbackObject);
}
/**
 * 删除数据库
 * @param { string } databaseName: 数据库名
 */


IndexedDB.deleteDatabase = function (databaseName) {
  indexeddb.deleteDatabase(databaseName);
  console.log("\u5220\u9664\u6570\u636E\u5E93\uFF1A".concat(databaseName, "\u3002"));
};

export default IndexedDB;